<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Discover amazing movies and TV shows through our gamified discovery system">
    <title>DiscoveryBox - Curated Content Discovery</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/components.css?v=6">
    <link rel="stylesheet" href="css/collectible-cards.css?v=1">
    <link rel="stylesheet" href="css/onboarding.css?v=1">
    <link rel="stylesheet" href="css/themes.css">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üé¨</text></svg>">
</head>
<body>
    <!-- Background particles -->
    <div class="particles" id="particles"></div>
    
    <!-- Navigation -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <span class="brand-icon">üé¨</span>
                <span class="brand-text">DiscoveryBox</span>
            </div>
            
            <div class="nav-menu">
                <button class="nav-btn" id="loginBtn" data-screen="login">Login</button>
                <button class="nav-btn primary" id="registerBtn" data-screen="register">Register</button>
                <div class="user-menu hidden" id="userMenu">
                    <span class="username" id="navUsername"></span>
                    <button class="nav-btn" id="profileBtn" data-screen="profile">üë§ Profile</button>
                    <button class="nav-btn" id="trophyBtn" data-screen="trophy">üèÜ Trophy Cabinet</button>
                    <button class="nav-btn admin-only hidden" id="adminBtn" data-screen="admin">‚öôÔ∏è Admin Panel</button>
                    <button class="nav-btn" id="logoutBtn">üö™ Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <div class="main-container">
        
        <!-- Login Screen -->
        <div class="screen" id="loginScreen">
            <div class="auth-container">
                <div class="auth-card">
                    <h2 class="auth-title">Welcome Back</h2>
                    <form id="loginForm" class="auth-form">
                        <div class="form-group">
                            <label for="loginEmail">Email</label>
                            <input type="email" id="loginEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary full-width">Login</button>
                    </form>
                    <p class="auth-switch">
                        Don't have an account? 
                        <a href="#" id="switchToRegister">Sign up here</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Register Screen -->
        <div class="screen hidden" id="registerScreen">
            <div class="auth-container">
                <div class="auth-card">
                    <h2 class="auth-title">Create Account</h2>
                    <form id="registerForm" class="auth-form">
                        <div class="form-group">
                            <label for="registerUsername">Username</label>
                            <input type="text" id="registerUsername" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="registerEmail">Email</label>
                            <input type="email" id="registerEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="registerPassword">Password</label>
                            <input type="password" id="registerPassword" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary full-width">Create Account</button>
                    </form>
                    <p class="auth-switch">
                        Already have an account? 
                        <a href="#" id="switchToLogin">Login here</a>
                    </p>
                </div>
            </div>
        </div>

        <!-- Loot Box Game Screen -->
        <div class="screen hidden" id="gameScreen">
            
            <!-- Top Right Controls -->
            <div class="top-controls">
                <button class="info-button" id="infoBtn">‚ÑπÔ∏è</button>
                <div class="spin-status" id="spinStatus">
                    <div class="spins-remaining">
                        <span class="spins-count" id="spinsCount">3</span>
                        <span class="spins-label">spins remaining</span>
                    </div>
                    <div class="spin-refresh-timer" id="spinRefreshTimer">
                        <div class="refresh-label">Next refresh in:</div>
                        <div class="countdown-display" id="countdownDisplay">--:--:--</div>
                    </div>
                </div>
                <button class="btn btn-secondary top-up-btn" id="topUpSpinsBtn">+ Add Spins (Test)</button>
            </div>

            <!-- Selection Screen -->
            <div class="game-container" id="selectionScreen">
                <div class="hero-section">
                    <div class="hero-content">
                        <h1 class="hero-title">Stop Endless Scrolling</h1>
                        <h2 class="hero-subtitle">Discover only the best movies & shows worth your time</h2>
                        <div class="hero-features">
                            <div class="feature-item">
                                <span class="feature-icon">‚≠ê</span>
                                <span class="feature-text">Quality Score 1-10 system</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">üéØ</span>
                                <span class="feature-text">No mediocre recommendations</span>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">‚ö°</span>
                                <span class="feature-text">Instant discovery, no account needed</span>
                            </div>
                        </div>
                        <div class="hero-cta">
                            <button class="btn btn-primary btn-hero" id="tryFirstSpinBtn">
                                <span class="btn-icon">üé∞</span>
                                Try Your First Spin
                            </button>
                            <p class="hero-note">Get your first movie recommendation in 3 seconds</p>
                        </div>
                    </div>
                    <div class="hero-preview">
                        <div class="quality-preview">
                            <h3>Our Quality Score System</h3>
                            <div class="score-examples">
                                <div class="score-example mythic">
                                    <div class="score-badge">9.5</div>
                                    <div class="score-info">
                                        <strong>Mythic Tier</strong>
                                        <span>Masterpiece films</span>
                                    </div>
                                </div>
                                <div class="score-example legendary">
                                    <div class="score-badge">8.2</div>
                                    <div class="score-info">
                                        <strong>Legendary</strong>
                                        <span>Highly acclaimed</span>
                                    </div>
                                </div>
                                <div class="score-example epic">
                                    <div class="score-badge">7.1</div>
                                    <div class="score-info">
                                        <strong>Epic Tier</strong>
                                        <span>Great entertainment</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="social-proof">
                            <div class="proof-stats">
                                <div class="stat-item">
                                    <strong>10,000+</strong>
                                    <span>Movies analyzed</span>
                                </div>
                                <div class="stat-item">
                                    <strong>95%</strong>
                                    <span>Satisfaction rate</span>
                                </div>
                                <div class="stat-item">
                                    <strong>2.3 hrs</strong>
                                    <span>Time saved daily</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Content Type Selection (shown after first interaction) -->
                <div class="content-selection hidden" id="contentTypeSelection">
                    <h3 class="selection-title">What are you in the mood for?</h3>
                    <div class="choices">
                        <div class="choice-card" id="movieChoice">
                            <div class="choice-icon">üé¨</div>
                            <div class="choice-content">
                                <h3>Movies</h3>
                                <p>Discover amazing films from blockbusters to hidden gems</p>
                            </div>
                        </div>

                        <div class="choice-card" id="seriesChoice">
                            <div class="choice-icon">üì∫</div>
                            <div class="choice-content">
                                <h3>TV Series</h3>
                                <p>Explore captivating series across all genres</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- DiscoveryBox Animation Screen -->
            <div class="game-container hidden" id="discoveryboxScreen">
                <div class="discoverybox-container">
                    <div class="discoverybox" id="discoverybox">
                        <div class="discoverybox-face"></div>
                        <div class="discoverybox-face"></div>
                        <div class="discoverybox-face"></div>
                        <div class="discoverybox-face"></div>
                        <div class="discoverybox-face"></div>
                        <div class="discoverybox-face"></div>
                    </div>
                    <div class="loading-text">Opening...</div>
                </div>
            </div>

            <!-- Result Screen -->
            <div class="game-container hidden" id="resultScreen">
                <div class="unlock-status-banner" id="unlockStatusBanner"></div>
                
                <!-- Collectible Card Display -->
                <div class="collectible-card unlock-animation" id="resultCollectibleCard">
                    <div class="collectible-card-inner">
                        <div class="collectible-card-header">
                            <div class="collectible-card-title" id="collectibleCardTitle"></div>
                            <div class="collectible-card-cost" id="collectibleCardCost"></div>
                        </div>
                        
                        <div class="collectible-card-art">
                            <div class="collectible-card-type" id="collectibleCardType"></div>
                            <div class="collectible-rarity-gem" id="collectibleRarityGem"></div>
                            <span id="collectibleCardIcon">üé¨</span>
                        </div>
                        
                        <div class="collectible-card-stats">
                            <div class="collectible-stats-row">
                                <span class="collectible-stat-label">Quality Score</span>
                                <span class="collectible-stat-value collectible-quality-score" id="collectibleQualityScore"></span>
                            </div>
                            <div class="collectible-stats-row">
                                <span class="collectible-stat-label">Critics</span>
                                <span class="collectible-stat-value" id="collectibleCriticsScore"></span>
                            </div>
                            <div class="collectible-stats-row">
                                <span class="collectible-stat-label">Audience</span>
                                <span class="collectible-stat-value" id="collectibleAudienceScore"></span>
                            </div>
                            <div class="collectible-stats-row">
                                <span class="collectible-stat-label" id="collectibleDurationLabel">Runtime</span>
                                <span class="collectible-stat-value" id="collectibleDuration"></span>
                            </div>
                        </div>
                        
                        <div class="collectible-card-description">
                            <div class="collectible-description-text" id="collectibleDescription"></div>
                        </div>
                        
                        <div class="collectible-card-footer">
                            <div class="collectible-card-year" id="collectibleCardYear"></div>
                            <div class="collectible-card-rarity" id="collectibleCardRarity"></div>
                        </div>
                    </div>
                </div>
                
                <div class="result-actions">
                    <button class="btn btn-primary" id="discoverAnotherBtn">Discover Another</button>
                    <button class="btn btn-secondary" id="viewTrophiesBtn">View Trophies</button>
                </div>
            </div>

            <!-- Legendary Particles (for special effects) -->
            <div class="legendary-particles hidden" id="legendaryParticles"></div>
            
            <!-- Burst Animation Container -->
            <div class="burst-container" id="burstContainer"></div>
        </div>

        <!-- Trophy Cabinet Screen -->
        <div class="screen hidden" id="trophyScreen">
            <div class="trophy-container">
                <div class="trophy-header">
                    <h2 class="trophy-title">Trophy Cabinet</h2>
                    <div class="trophy-stats" id="trophyStats"></div>
                </div>

                <div class="trophy-filters">
                    <div class="filters-header">
                        <h3 class="filters-title">Filter & Sort</h3>
                        <button class="filter-clear-btn" id="clearFiltersBtn" title="Clear all filters">
                            <span class="clear-icon">üóëÔ∏è</span>
                            Clear Filters
                        </button>
                    </div>

                    <div class="filters-main">
                        <div class="filters-row">
                            <div class="filter-group">
                                <label class="filter-label" for="typeFilter">Content Type</label>
                                <div class="select-wrapper">
                                    <select id="typeFilter" class="filter-select">
                                        <option value="">All Types</option>
                                        <option value="movie">üé¨ Movies</option>
                                        <option value="series">üì∫ TV Series</option>
                                    </select>
                                    <span class="select-arrow">‚ñº</span>
                                </div>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label" for="rarityFilter">Rarity Tier</label>
                                <div class="select-wrapper">
                                    <select id="rarityFilter" class="filter-select">
                                        <option value="">All Rarities</option>
                                        <option value="mythic">üåü Mythic</option>
                                        <option value="legendary">üëë Legendary</option>
                                        <option value="epic">üíé Epic</option>
                                        <option value="rare">‚≠ê Rare</option>
                                        <option value="uncommon">üîπ Uncommon</option>
                                        <option value="common">‚ö™ Common</option>
                                    </select>
                                    <span class="select-arrow">‚ñº</span>
                                </div>
                            </div>
                            
                            <div class="filter-group">
                                <label class="filter-label" for="sortFilter">Sort By</label>
                                <div class="select-wrapper">
                                    <select id="sortFilter" class="filter-select">
                                        <option value="unlock_time">‚è∞ Recently Unlocked</option>
                                        <option value="unlock_time_asc">üïò Oldest Unlocks</option>
                                        <option value="title_asc">üî§ Title (A-Z)</option>
                                        <option value="title_desc">üî§ Title (Z-A)</option>
                                        <option value="release_year">üìÖ Release Year (Newest)</option>
                                        <option value="release_year_asc">üìÖ Release Year (Oldest)</option>
                                        <option value="quality_score">‚≠ê Quality Score (High)</option>
                                        <option value="quality_score_asc">‚≠ê Quality Score (Low)</option>
                                        <option value="critics_score">üë®‚Äçüéì Critics Score (High)</option>
                                        <option value="audience_score">üë• Audience Score (High)</option>
                                    </select>
                                    <span class="select-arrow">‚ñº</span>
                                </div>
                            </div>
                        </div>

                        <div class="filters-row">
                            <div class="filter-group toggle-group">
                                <label class="toggle-switch">
                                    <input type="checkbox" id="groupByRarityToggle" checked>
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-label">
                                        <span class="toggle-icon">üìä</span>
                                        Group by Rarity
                                    </span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="filters-footer">
                        <div class="rarity-counters" id="rarityCounters">
                            <!-- Unlock counters will be populated here -->
                        </div>
                        
                        <button class="btn btn-secondary back-btn" id="backToGameBtn">
                            <span class="back-icon">‚Üê</span>
                            Back to Game
                        </button>
                    </div>
                </div>

                <div class="trophy-grid" id="trophyGrid">
                    <!-- Trophy items will be populated by JavaScript -->
                </div>

                <div class="trophy-pagination" id="trophyPagination"></div>
            </div>
        </div>

        <!-- User Profile Screen -->
        <div class="screen hidden" id="profileScreen">
            <div class="profile-container">
                <div class="profile-header">
                    <div class="profile-nav">
                        <button class="profile-nav-btn active" data-tab="overview">üë§ Overview</button>
                        <button class="profile-nav-btn" data-tab="showcase">‚≠ê Showcase</button>
                        <button class="profile-nav-btn" data-tab="settings">‚öôÔ∏è Settings</button>
                        <button class="btn btn-secondary back-btn" id="backToGameFromProfile">
                            <span class="back-icon">‚Üê</span>
                            Back to Game
                        </button>
                    </div>
                </div>

                <!-- Profile Overview Tab -->
                <div class="profile-tab active" id="overviewTab">
                    <div class="profile-overview">
                        <div class="profile-main">
                            <div class="profile-avatar-section">
                                <div class="profile-avatar">
                                    <div class="avatar-placeholder">
                                        <span class="avatar-initials" id="avatarInitials"></span>
                                    </div>
                                    <div class="profile-info">
                                        <h2 class="profile-username" id="profileUsername"></h2>
                                        <p class="profile-member-since">Member since <span id="profileMemberSince"></span></p>
                                        <div class="profile-status">
                                            <span class="status-indicator online"></span>
                                            <span class="status-text">Online</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="profile-stats-grid">
                                <div class="stat-card">
                                    <div class="stat-icon">üèÜ</div>
                                    <div class="stat-content">
                                        <span class="stat-number" id="totalTrophiesCount">0</span>
                                        <span class="stat-label">Total Trophies</span>
                                    </div>
                                </div>

                                <div class="stat-card">
                                    <div class="stat-icon">üé∞</div>
                                    <div class="stat-content">
                                        <span class="stat-number" id="totalSpinsCount">0</span>
                                        <span class="stat-label">Total Spins</span>
                                    </div>
                                </div>

                                <div class="stat-card">
                                    <div class="stat-icon">üåü</div>
                                    <div class="stat-content">
                                        <span class="stat-number" id="rareItemsCount">0</span>
                                        <span class="stat-label">Rare+ Items</span>
                                    </div>
                                </div>

                                <div class="stat-card">
                                    <div class="stat-icon">üìà</div>
                                    <div class="stat-content">
                                        <span class="stat-number" id="collectionRate">0%</span>
                                        <span class="stat-label">Collection Rate</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="profile-activity">
                            <h3>Recent Activity</h3>
                            <div class="activity-list" id="recentActivity">
                                <!-- Activity items will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile Showcase Tab -->
                <div class="profile-tab" id="showcaseTab">
                    <div class="showcase-container">
                        <div class="showcase-header">
                            <h3>Your Top 5 Showcase</h3>
                            <p class="showcase-description">Select your 5 favorite trophies to display on your profile</p>
                            <button class="btn btn-primary" id="editShowcaseBtn">Edit Showcase</button>
                        </div>

                        <div class="showcase-grid" id="showcaseGrid">
                            <!-- Showcase cards will be populated here -->
                        </div>

                        <!-- Showcase Editor (hidden by default) -->
                        <div class="showcase-editor hidden" id="showcaseEditor">
                            <div class="editor-header">
                                <h4>Choose Your Showcase Cards</h4>
                                <div class="editor-controls">
                                    <button class="btn btn-success" id="saveShowcaseBtn">Save Showcase</button>
                                    <button class="btn btn-secondary" id="cancelShowcaseBtn">Cancel</button>
                                </div>
                            </div>

                            <div class="editor-filters">
                                <select id="showcaseTypeFilter" class="showcase-filter">
                                    <option value="">All Types</option>
                                    <option value="movie">üé¨ Movies</option>
                                    <option value="series">üì∫ TV Series</option>
                                </select>

                                <select id="showcaseRarityFilter" class="showcase-filter">
                                    <option value="">All Rarities</option>
                                    <option value="mythic">üåü Mythic</option>
                                    <option value="legendary">üëë Legendary</option>
                                    <option value="epic">üíé Epic</option>
                                    <option value="rare">‚≠ê Rare</option>
                                    <option value="uncommon">üîπ Uncommon</option>
                                    <option value="common">‚ö™ Common</option>
                                </select>
                            </div>

                            <div class="showcase-selection" id="showcaseSelection">
                                <!-- Available trophies for selection will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Profile Settings Tab -->
                <div class="profile-tab" id="settingsTab">
                    <div class="settings-container">
                        <div class="settings-section">
                            <h3>Account Information</h3>
                            <form id="accountSettingsForm" class="settings-form">
                                <div class="form-group">
                                    <label for="settingsUsername">Username</label>
                                    <input type="text" id="settingsUsername" name="username" required>
                                    <small class="form-help">Your display name visible to other users</small>
                                </div>

                                <div class="form-group">
                                    <label for="settingsEmail">Email</label>
                                    <input type="email" id="settingsEmail" name="email" required>
                                    <small class="form-help">Used for login and notifications</small>
                                </div>

                                <div class="form-group">
                                    <label for="settingsTimezone">Timezone</label>
                                    <select id="settingsTimezone" name="timezone" class="timezone-select">
                                        <option value="">Auto-detect timezone</option>
                                    </select>
                                    <small class="form-help">Choose your timezone for accurate time displays</small>
                                </div>

                                <button type="submit" class="btn btn-primary">Update Account Info</button>
                            </form>
                        </div>

                        <div class="settings-section">
                            <h3>Change Password</h3>
                            <form id="passwordChangeForm" class="settings-form">
                                <div class="form-group">
                                    <label for="currentPassword">Current Password</label>
                                    <input type="password" id="currentPassword" name="currentPassword" required>
                                </div>

                                <div class="form-group">
                                    <label for="newPassword">New Password</label>
                                    <input type="password" id="newPassword" name="newPassword" required>
                                </div>

                                <div class="form-group">
                                    <label for="confirmPassword">Confirm New Password</label>
                                    <input type="password" id="confirmPassword" name="confirmPassword" required>
                                </div>

                                <button type="submit" class="btn btn-primary">Change Password</button>
                            </form>
                        </div>

                        <div class="settings-section">
                            <h3>Privacy Settings</h3>
                            <div class="privacy-controls">
                                <div class="privacy-option">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="profilePublic" checked>
                                        <span class="toggle-slider"></span>
                                        <span class="toggle-label">
                                            <span class="toggle-icon">üåç</span>
                                            Make Profile Public
                                        </span>
                                    </label>
                                    <small class="form-help">Allow other users to view your profile and showcase</small>
                                </div>

                                <div class="privacy-option">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="showStats" checked>
                                        <span class="toggle-slider"></span>
                                        <span class="toggle-label">
                                            <span class="toggle-icon">üìä</span>
                                            Show Collection Stats
                                        </span>
                                    </label>
                                    <small class="form-help">Display your collection statistics on your public profile</small>
                                </div>

                                <div class="privacy-option">
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="showActivity" checked>
                                        <span class="toggle-slider"></span>
                                        <span class="toggle-label">
                                            <span class="toggle-icon">üìà</span>
                                            Show Recent Activity
                                        </span>
                                    </label>
                                    <small class="form-help">Display your recent trophy unlocks and activity</small>
                                </div>
                            </div>
                        </div>

                        <div class="settings-section danger-zone">
                            <h3>Danger Zone</h3>
                            <div class="danger-controls">
                                <button class="btn btn-danger" id="deleteAccountBtn">Delete Account</button>
                                <small class="form-help">Permanently delete your account and all data. This cannot be undone.</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Panel Screen -->
        <div class="screen hidden" id="adminScreen">
            <div class="admin-container">
                <div class="admin-header">
                    <h2 class="admin-title">Admin Panel</h2>
                    <button class="btn btn-secondary" id="backToGameFromAdmin">Back to Game</button>
                </div>

                <div class="admin-tabs">
                    <button class="admin-tab active" data-tab="dashboard">üìä Dashboard</button>
                    <button class="admin-tab" data-tab="users">üë• Users</button>
                    <button class="admin-tab" data-tab="content">üé¨ Content</button>
                    <button class="admin-tab" data-tab="spins">üéÆ Spins</button>
                    <button class="admin-tab" data-tab="analytics">üìà Analytics</button>
                    <button class="admin-tab" data-tab="logs">üìã Logs</button>
                    <button class="admin-tab" data-tab="settings">‚öôÔ∏è Settings</button>
                </div>

                <!-- Dashboard Tab -->
                <div class="admin-tab-content active" id="adminDashboardTab">
                    <div class="dashboard-overview">
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <div class="metric-icon">üë•</div>
                                <div class="metric-content">
                                    <div class="metric-value" id="dashTotalUsers">0</div>
                                    <div class="metric-label">Total Users</div>
                                    <div class="metric-change" id="dashUsersChange">+0 this week</div>
                                </div>
                            </div>
                            
                            <div class="metric-card">
                                <div class="metric-icon">üé¨</div>
                                <div class="metric-content">
                                    <div class="metric-value" id="dashTotalContent">0</div>
                                    <div class="metric-label">Content Items</div>
                                    <div class="metric-change" id="dashContentSplit">0 movies, 0 series</div>
                                </div>
                            </div>
                            
                            <div class="metric-card">
                                <div class="metric-icon">üé∞</div>
                                <div class="metric-content">
                                    <div class="metric-value" id="dashTotalSpins">0</div>
                                    <div class="metric-label">Spins Today</div>
                                    <div class="metric-change" id="dashSpinsChange">0 total unlocks</div>
                                </div>
                            </div>
                            
                            <div class="metric-card">
                                <div class="metric-icon">üèÜ</div>
                                <div class="metric-content">
                                    <div class="metric-value" id="dashActiveUsers">0</div>
                                    <div class="metric-label">Active Users</div>
                                    <div class="metric-change" id="dashActiveChange">Last 7 days</div>
                                </div>
                            </div>
                        </div>

                        <div class="dashboard-charts">
                            <div class="chart-container">
                                <h3>User Activity (Last 30 Days)</h3>
                                <div class="chart-placeholder" id="userActivityChart">
                                    <div class="chart-loading">üìä Chart data loading...</div>
                                </div>
                            </div>
                            
                            <div class="chart-container">
                                <h3>Content Performance</h3>
                                <div class="chart-placeholder" id="contentPerformanceChart">
                                    <div class="chart-loading">üìà Chart data loading...</div>
                                </div>
                            </div>
                        </div>

                        <div class="dashboard-actions">
                            <h3>Quick Actions</h3>
                            <div class="action-buttons">
                                <button class="btn btn-primary" onclick="adminPanel.grantSpinsToAll()">
                                    <span class="btn-icon">üéÅ</span>
                                    Grant Bonus Spins
                                </button>
                                <button class="btn btn-secondary" onclick="adminPanel.exportUserData()">
                                    <span class="btn-icon">üìä</span>
                                    Export Data
                                </button>
                                <button class="btn btn-warning" onclick="adminPanel.maintenanceMode()">
                                    <span class="btn-icon">‚ö†Ô∏è</span>
                                    Maintenance Mode
                                </button>
                                <button class="btn btn-info" onclick="adminPanel.refreshAllData()">
                                    <span class="btn-icon">üîÑ</span>
                                    Refresh Data
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Management Tab -->
                <div class="admin-tab-content" id="adminContentTab">
                    <div class="admin-controls">
                        <div class="admin-filters">
                            <select id="adminTypeFilter">
                                <option value="">All Types</option>
                                <option value="movie">Movies</option>
                                <option value="series">TV Series</option>
                            </select>
                            <select id="adminRarityFilter">
                                <option value="">All Rarities</option>
                                <option value="mythic">Mythic</option>
                                <option value="legendary">Legendary</option>
                                <option value="epic">Epic</option>
                                <option value="rare">Rare</option>
                                <option value="uncommon">Uncommon</option>
                                <option value="common">Common</option>
                            </select>
                            <select id="adminSortFilter">
                                <option value="quality_score_desc">Quality Score (High to Low)</option>
                                <option value="quality_score_asc">Quality Score (Low to High)</option>
                                <option value="title_asc">Title (A-Z)</option>
                                <option value="title_desc">Title (Z-A)</option>
                                <option value="year_desc">Year (Newest)</option>
                                <option value="year_asc">Year (Oldest)</option>
                            </select>
                        </div>
                        <div class="admin-stats">
                            <span class="admin-stat">Total: <span id="totalContentCount">0</span></span>
                            <span class="admin-stat">Movies: <span id="movieCount">0</span></span>
                            <span class="admin-stat">Series: <span id="seriesCount">0</span></span>
                        </div>
                    </div>

                    <div class="admin-content-grid" id="adminContentGrid">
                        <!-- Content items will be populated here -->
                    </div>

                    <div class="admin-pagination" id="adminPagination">
                        <!-- Pagination controls -->
                    </div>
                </div>

                <!-- Other tabs (placeholder) -->
                <div class="admin-tab-content" id="adminUsersTab">
                    <h3>User Management</h3>
                    <p>User management features coming soon...</p>
                </div>

                <div class="admin-tab-content" id="adminSettingsTab">
                    <h3>Admin Settings</h3>
                    <p>Admin settings coming soon...</p>
                </div>
            </div>
        </div>

    </div>

    <!-- Algorithm Info Modal -->
    <!-- Info Modal -->
    <div class="modal-overlay hidden" id="modalOverlay">
        <div class="modal-content" id="modalContent">
            <button class="modal-close" id="closeModal">√ó</button>
            <h3>How It Works</h3>
            <div class="modal-body">
                <h4>Quality Score Algorithm</h4>
                <p>Our algorithm combines multiple factors to curate the best content:</p>
                <ul>
                    <li><strong>Critics Score (80%)</strong> - Professional reviews heavily weighted</li>
                    <li><strong>Audience Score (20%)</strong> - User ratings with reduced influence</li>
                    <li><strong>Bonuses:</strong> Certified Fresh (+5), Verified Hot (+3), High IMDb (+3-8)</li>
                    <li><strong>Penalties:</strong> Low critic scores (-5 to -10), Mainstream bias penalty (-5 to -10 when audience score exceeds critic score by 10+ points)</li>
                </ul>
                <p style="font-size: 0.9em; color: #a0a0b0; margin-top: 10px;">
                    <em>The mainstream bias penalty helps filter out crowd-pleasers that lack critical acclaim, ensuring higher-quality discoveries.</em>
                </p>

                <h4>Rarity Tiers</h4>
                <ul>
                    <li><strong>üåü Mythic (95+)</strong> - Once in a lifetime content</li>
                    <li><strong>üëë Legendary (90+)</strong> - Masterpiece tier</li>
                    <li><strong>üíé Epic (85+)</strong> - Outstanding quality</li>
                    <li><strong>‚≠ê Rare (80+)</strong> - Great finds</li>
                    <li><strong>üîπ Uncommon (75+)</strong> - Solid choices</li>
                    <li><strong>‚ö™ Common (70+)</strong> - Good entertainment</li>
                </ul>

                <h4>Daily Limits</h4>
                <p>Each user gets 3 spins per day to encourage discovery without overwhelming choice.</p>
            </div>
        </div>
    </div>

    <!-- Card Detail Modal -->
    <div class="modal-overlay hidden" id="cardDetailModal">
        <div class="card-modal-content">
            <button class="modal-close" id="closeCardModal">√ó</button>
            <div class="card-modal-body">
                <!-- Full-size card will be populated here -->
                <div class="collectible-card" id="modalCard">
                    <div class="collectible-card-inner">
                        <div class="collectible-card-header">
                            <div class="collectible-card-title" id="modalCardTitle"></div>
                            <div class="collectible-card-cost" id="modalCardCost"></div>
                        </div>
                        
                        <div class="collectible-card-art">
                            <div class="collectible-card-type" id="modalCardType"></div>
                            <div class="collectible-rarity-gem" id="modalRarityGem"></div>
                            <span id="modalCardIcon">üé¨</span>
                        </div>
                        
                        <div class="collectible-card-stats">
                            <div class="collectible-stats-row">
                                <span class="collectible-stat-label">Quality Score</span>
                                <span class="collectible-stat-value collectible-quality-score" id="modalQualityScore"></span>
                            </div>
                            <div class="collectible-stats-row">
                                <span class="collectible-stat-label">Critics</span>
                                <span class="collectible-stat-value" id="modalCriticsScore"></span>
                            </div>
                            <div class="collectible-stats-row">
                                <span class="collectible-stat-label">Audience</span>
                                <span class="collectible-stat-value" id="modalAudienceScore"></span>
                            </div>
                            <div class="collectible-stats-row">
                                <span class="collectible-stat-label" id="modalDurationLabel">Runtime</span>
                                <span class="collectible-stat-value" id="modalDuration"></span>
                            </div>
                        </div>
                        
                        <div class="collectible-card-description">
                            <div class="collectible-description-text" id="modalDescription"></div>
                        </div>
                        
                        <div class="collectible-card-footer">
                            <div class="collectible-card-year" id="modalCardYear"></div>
                            <div class="collectible-card-rarity" id="modalCardRarity"></div>
                        </div>
                        
                        <!-- Trophy unlock timestamp (only shown for trophies) -->
                        <div class="collectible-card-unlock-time hidden" id="modalUnlockTime">
                            <span class="unlock-icon">üîì</span>
                            <span class="unlock-text" id="modalUnlockText"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Loading...</div>
    </div>

    <!-- Notification System -->
    <div class="notification-container" id="notificationContainer"></div>

    <!-- Quality Score Education Modal -->
    <div class="education-modal hidden" id="qualityEducationModal">
        <div class="education-content">
            <button class="education-close" id="educationCloseBtn">√ó</button>
            
            <div class="education-header">
                <h2 class="education-title">How Our Quality Score Works</h2>
                <p class="education-subtitle">We rate every movie and show from 1-10 so you never waste time on mediocre content</p>
            </div>

            <div class="education-body">
                <div class="problem-solution">
                    <div class="problem-card">
                        <div class="card-icon">üòµ‚Äçüí´</div>
                        <h3 class="card-title">The Problem</h3>
                        <p>Endless scrolling through Netflix, Hulu, Prime Video... spending 30 minutes just to find something decent to watch.</p>
                    </div>
                    <div class="solution-card">
                        <div class="card-icon">üéØ</div>
                        <h3 class="card-title">Our Solution</h3>
                        <p>Only high-quality content makes it to your discovery feed. No 5.2/10 movies wasting your evening!</p>
                    </div>
                </div>

                <div class="score-breakdown">
                    <div class="score-tier mythic-tier">
                        <div class="tier-badge">9.0 - 10.0</div>
                        <div class="tier-info">
                            <h4>Mythic Tier ‚ú®</h4>
                            <p>Absolute masterpieces. Think "The Godfather", "Breaking Bad", "Spirited Away" - content that defines genres.</p>
                        </div>
                    </div>

                    <div class="score-tier legendary-tier">
                        <div class="tier-badge">8.0 - 8.9</div>
                        <div class="tier-info">
                            <h4>Legendary Tier üèÜ</h4>
                            <p>Highly acclaimed films and shows. Excellent production, writing, and performances. "Inception", "Stranger Things".</p>
                        </div>
                    </div>

                    <div class="score-tier epic-tier">
                        <div class="tier-badge">7.0 - 7.9</div>
                        <div class="tier-info">
                            <h4>Epic Tier ‚ö°</h4>
                            <p>Great entertainment value. Well-made content that's definitely worth your time. "The Martian", "Brooklyn 99".</p>
                        </div>
                    </div>

                    <div class="score-tier rare-tier">
                        <div class="tier-badge">6.0 - 6.9</div>
                        <div class="tier-info">
                            <h4>Rare Tier üîπ</h4>
                            <p>Good quality content with solid storytelling. Some flaws but generally enjoyable.</p>
                        </div>
                    </div>
                </div>

                <div class="value-proposition">
                    <h3>üïí Save 2+ Hours Every Week</h3>
                    <p>No more decision fatigue. No more "meh" movies. Just quality content that respects your time.</p>
                </div>
            </div>

            <div class="education-actions">
                <button class="btn btn-primary" id="educationGotItBtn">Got it! Let's discover more</button>
            </div>
        </div>
    </div>

    <!-- Achievement Notification -->
    <div class="achievement-notification hidden" id="achievementNotification">
        <div class="achievement-header">
            <span class="achievement-icon" id="achievementIcon">üèÜ</span>
            <span class="achievement-title" id="achievementTitle">Achievement Unlocked!</span>
        </div>
        <div class="achievement-description" id="achievementDescription">You've discovered your first movie!</div>
    </div>

    <!-- Guest Progress Banner -->
    <div class="guest-progress-banner" id="guestProgressBanner">
        <div class="progress-content">
            <div class="progress-info">
                <span class="progress-icon">üíé</span>
                <div class="progress-text">
                    <div class="progress-title">Don't lose your collection!</div>
                    <div class="progress-subtitle">You've discovered <span id="progressSpinCount">3</span> amazing movies</div>
                </div>
            </div>
            <div class="progress-actions">
                <button class="btn btn-primary" id="signUpFromProgress">Save Progress - Sign Up</button>
                <button class="progress-dismiss" id="dismissProgress">Maybe later</button>
            </div>
        </div>
    </div>

    <!-- JavaScript - Core Services -->
    <script src="js/services/StateManager.js?v=1"></script>
    <script src="js/services/EventBus.js?v=1"></script>
    <script src="js/services/StorageManager.js?v=1"></script>
    
    <!-- Base Components -->
    <script src="js/components/base/BaseComponent.js?v=1"></script>
    <script src="js/components/base/BaseModal.js?v=1"></script>
    <script src="js/components/base/BaseForm.js?v=1"></script>
    
    <!-- Admin Components -->
    <script src="js/components/admin/AdminDashboard.js?v=1"></script>
    <script src="js/components/admin/ContentManager.js?v=1"></script>
    <script src="js/components/admin/UserManagement.js?v=1"></script>
    <script src="js/components/admin/SystemSettings.js?v=1"></script>
    
    <!-- Profile Components -->
    <script src="js/components/profile/ProfileEditor.js?v=1"></script>
    <script src="js/components/profile/ShowcaseManager.js?v=1"></script>
    <script src="js/components/profile/StatisticsDisplay.js?v=1"></script>
    
    <!-- Trophy Components -->
    <script src="js/components/trophy/TrophyGrid.js?v=1"></script>
    <script src="js/components/trophy/TrophyFilters.js?v=1"></script>
    <script src="js/components/trophy/RarityManager.js?v=1"></script>
    <script src="js/components/trophy/ExportManager.js?v=1"></script>
    
    <!-- Legacy Components (preserved for compatibility) -->
    <script src="js/utils.js?v=3"></script>
    <script src="js/timezone-init.js?v=1"></script>
    <script src="js/guest-session.js?v=1"></script>
    <script src="js/api.js?v=7"></script>
    <script src="js/auth.js?v=3"></script>
    <script src="js/ui.js?v=4"></script>
    <script src="js/discoverybox.js?v=3"></script>
    <script src="js/trophy.js?v=5"></script>
    <script src="js/profile.js?v=5"></script>
    <script src="js/admin.js?v=1"></script>
    <script src="js/onboarding.js?v=1"></script>
    <script src="js/router.js?v=1"></script>
    
    <!-- Component Registry and App -->
    <script src="js/components/ComponentRegistry.js?v=1"></script>
    <script src="js/migration-helper.js?v=1"></script>
    <script src="js/app.js?v=3"></script>
    <script src="js/RefactoredApp.js?v=1"></script>
</body>
</html>